@model IEnumerable<DB.Order>

@{
    ViewBag.Title = "כל ההזמנות";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section ExtraScripts{
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script src="~/Scripts/SearchScript.js"></script>
}

@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title</h1>
            </hgroup>
        </div>
    </section>
}

<fieldset>
    <legend>חיפוש מתקדם</legend>
    <br />

    <div id="ExpandingSearchBox" style="display:none;">

    @using (Html.BeginForm("Search", "Orders"))
    {
        @Html.ValidationSummary(true)
            
            <div class="editor-label">
            <span>שם המזמין:</span>
            </div>
            <div class="editor-field">
                @Html.DropDownList("UserId", (SelectList)ViewBag.UsersList)
            </div>
            
            <div class="editor-label">
                <span>סטאטוס:</span>
            </div>
            <div class="editor-field">
                @Html.DropDownList("StatusId", (SelectList)ViewBag.StatusesList)
            </div>

            <div class="editor-label">
                <span>ספק:</span>
            </div>
            <div class="editor-field">
                @Html.DropDownList("SupplierId", (SelectList)ViewBag.SuppliersList)
            </div>

            <div class="editor-label">
                <span>מחיר:</span>
            </div>
            <div class="editor-field">
                @Html.TextBox("PriceMin") - @Html.TextBox("PriceMax")
            </div>
            
            <div class="editor-label">
                <span>תאריך יצירה (DD/MM/YYYY):</span>
            </div>
            <div class="editor-field">
                @Html.TextBox("CreationMin") - @Html.TextBox("CreationMax")
            </div>
            
            <div class="editor-label">
                <span>חפש את המילים הבאות בהערות:</span>
            </div>
            <div class="editor-field">
                @Html.TextBox("NoteText")
            </div>
        
            <p>
                <input type="submit" value="חפש"/>
            </p>
    }

    </div>
    <input id="ExpandSearchButton" type="button" value="הצג" />
</fieldset>

@if (Model.Count() != 0)
{ 
    @Html.Action("SimpleList", new { orders = Model })
}
else
{
    <span class="no-properties">לא נמצאו הזמנות.</span> 
}